# 객체 검출 라벨링 도구 사용 설명서

이 도구는 이미지에서 객체를 검출하고 라벨링하는 데 사용되는 현대적인 GUI 기반 애플리케이션입니다.

## 필수 요구사항

- Python 3.x
- OpenCV (cv2)
- NumPy
- Pillow (PIL)
- tkinter

## 설치 방법

1. 필요한 패키지 설치:
```bash
pip install -r requirements.txt
```

2. `classes.txt` 파일 준비:
   - 프로그램과 같은 디렉토리에 `classes.txt` 파일이 있어야 합니다.
   - 파일 형식: `클래스ID,클래스이름` (한 줄에 하나씩)
   - 예시:
     ```
     0,person
     1,car
     2,dog
     ```

## 사용 방법

1. 프로그램 실행:
```bash
python detection.py
```

2. 프로그램이 시작되면 이미지 폴더를 선택하라는 대화상자가 표시됩니다.
   - 이미지 폴더에는 `.png`, `.jpg`, `.jpeg`, `.bmp` 형식의 이미지 파일이 있어야 합니다.

3. 주요 기능:

   - **이미지 탐색**:
     - `A` 키 또는 '이전' 버튼: 이전 이미지로 이동
     - `D` 키 또는 '다음' 버튼: 다음 이미지로 이동
     - 상단 경로 표시줄에서 현재 폴더 확인 가능
     - '폴더 변경' 버튼으로 다른 이미지 폴더 선택 가능
   
   - **클래스 선택**:
     - 하단의 클래스 버튼 클릭 또는 숫자 키(`0-9`)로 클래스 선택
     - 각 클래스는 고유한 색상으로 표시됨
   
   - **박스 그리기**:
     - 마우스 왼쪽 버튼 드래그: 브러시로 영역 선택
     - 브러시 크기 슬라이더로 브러시 크기 조절
     - 선택한 영역이 자동으로 박스로 변환됨
   
   - **박스 관리**:
     - `E` 키 또는 '삭제 모드' 버튼: 삭제 모드 전환
     - 삭제 모드에서 박스 클릭: 해당 박스 삭제
     - 삭제 모드일 때 박스가 빨간색으로 표시됨
   
   - **저장**:
     - `S` 키 또는 '저장' 버튼: 현재 이미지의 라벨 저장
     - 라벨은 `이미지폴더/data/label/` 디렉토리에 저장
     - 이미지는 `이미지폴더/data/img/` 디렉토리에 저장
     - 저장 형식: YOLO 형식 (class_id x_center y_center width height)

4. 상태 표시:
   - 하단 상태 표시줄에서 다음 정보 확인 가능:
     - 현재 이미지 파일명과 진행 상황
     - 현재 모드 (그리기/삭제)
     - 선택된 클래스와 이름
     - 현재 이미지의 박스 개수

## 주의사항

1. 이미지 폴더 구조:
   ```
   이미지폴더/
   ├── 이미지1.jpg
   ├── 이미지2.jpg
   └── data/
       ├── img/
       │   ├── 이미지1.jpg
       │   └── 이미지2.jpg
       └── label/
           ├── 이미지1.txt
           └── 이미지2.txt
   ```

2. 라벨 파일:
   - 자동으로 생성되며, 기존 라벨이 있는 경우 자동으로 로드
   - YOLO 형식으로 저장 (class_id x_center y_center width height)
   - 좌표는 이미지 크기에 대한 상대값 (0~1)

3. 프로그램 종료:
   - 창을 닫아 프로그램 종료
   - 종료 전에 반드시 `S` 키를 눌러 현재 작업을 저장

## 문제 해결

1. 이미지가 로드되지 않는 경우:
   - 이미지 파일이 손상되었는지 확인
   - 지원되는 이미지 형식인지 확인 (.png, .jpg, .jpeg, .bmp)
   - 파일 경로에 한글이 포함된 경우 주의

2. 클래스 설정 오류:
   - `classes.txt` 파일이 올바른 형식으로 작성되었는지 확인
   - 파일이 프로그램과 같은 디렉토리에 있는지 확인
   - 클래스 ID가 0-9 범위 내에 있는지 확인

3. 저장 오류:
   - `data/img` 및 `data/label` 디렉토리에 쓰기 권한이 있는지 확인
   - 디스크 공간이 충분한지 확인
   - 파일이 다른 프로그램에 의해 사용 중인지 확인

4. GUI 관련 문제:
   - 화면 해상도가 충분한지 확인 (최소 1024x768 권장)
   - tkinter가 정상적으로 설치되어 있는지 확인
   - 다른 프로그램과의 충돌 여부 확인 